#query services
test_name: qery_services
#
includes:
  - !include envfile.yml

stages:
  - name: upload_package
    request:
      url: "{upload_package:s}"
      method: POST
      files:
        package: "5gtango-ns-package-example.tgo"
    response:
      status_code: 200
      save:
        body:
          package_process_uuid: package_process_uuid
    delay_after: 15    
        
  - name: check_upload_status
    request:
      url: "{upload_package:s}/status/{package_process_uuid:s}"
      method: GET
    response:
      status_code: 200
      save:
        body:
          package_id: package_id
          name: package_content.id.name
          vendor: package_content.id.vendor
          version: package_content.id.version    

  - name: check_upload_status
    request:
      url: "{upload_package:s}/{package_id:s}"
      method: GET
    response:
      status_code: 200
      save:
        body:
          name: pd.package_content.id.name
          vendor: pd.package_content.id.vendor
          version: pd.package_content.id.version          

  - name: get_services
    request:
      url: "{get_services:s}?name=:{name:s}&vendor=:{vendor:s}&version=:{versions:s}"
      method: GET
    response:
      status_code: 200      

  - name: delete_package
    request:
      url: "{upload_package:s}{package_id:s}"
      method: DELETE
    response:
      status_code: 204

   
     
